<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper>


	<select id="getAccountAlready" parameterType="java.util.Map" resultType="java.lang.Integer">
		select count(id) from user 
		<where>
			<if test="level !=null and ( level ==2 or level == '2')"> and level =#{level} 
			 and  name =#{name}  or account =#{account} 
			</if>
			<if test="level !=null and ( level ==3 or level == '3')">and buildingId =#{adminBuildingId} and level =#{level} 
				and  name =#{name} or account =#{account} 
			</if>
		</where>
	
	
	</select>
	
	
	<insert id="addAdmin" parameterType="java.util.Map" >
		insert into admin(name,level,account,pwd,building_id,store_id) values(#{name},#{level},#{account},#{pwd},#{buildingId},#{storeId})
		
	</insert>
	
	<update id="updatePwd" parameterType="java.util.Map" >
			update admin set
			pwd =#{pwd} where id=#{id} 
			 <if test="level !=null and ( level ==2 or level == '2')"> and building_id =#{buildingId} </if> 
	</update>
	
		<update id="updateAdmin" parameterType="java.util.Map" >
			update admin  set name=#{name} where building_id=#{id} and store_id#{storeId}
	</update>
	
	<delete id="delAdmin" parameterType="java.util.Map" >
			delete from  admin where id =#{id} and <if test="level !=null and ( level ==2 or level == '2')"> and building_id =#{buildingId} </if> 
	</delete>

</mapper>